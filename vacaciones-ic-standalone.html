<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vacaciones 2025-26 I&C</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Iconos simplificados
        const CalendarIcon = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>;
        const UserIcon = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>;
        const ShieldIcon = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>;
        const ClockIcon = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>;
        const CheckIcon = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="20 6 9 17 4 12"/></svg>;
        const XIcon = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>;
        const LogOutIcon = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>;

        // Base de datos de empleados
        const employeesDB = {
          '40900': { firstName: 'LUCAS', lastName: 'CARABANA', matricula: '40900', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '43943': { firstName: 'JONATAN', lastName: 'CASTELLANO', matricula: '43943', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '41647': { firstName: 'ALEXIS', lastName: 'CECCOTTI', matricula: '41647', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '42264': { firstName: 'CRISTIAN', lastName: 'ELUSICH', matricula: '42264', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '40402': { firstName: 'EMILIO', lastName: 'FARI칌A', matricula: '40402', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '41760': { firstName: 'EDGARDO', lastName: 'GARCIA MESA', matricula: '41760', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '42175': { firstName: 'EDGARDO', lastName: 'MONTEAGUDO', matricula: '42175', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '42090': { firstName: 'MARCOS', lastName: 'PEREZ', matricula: '42090', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '41607': { firstName: 'JONATAN', lastName: 'TORRES', matricula: '41607', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '39235': { firstName: 'VALERIA', lastName: 'TREVISOL', matricula: '39235', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '40390': { firstName: 'NAHUEL', lastName: 'VERA', matricula: '40390', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '41736': { firstName: 'TOMAS', lastName: 'WILHIEN', matricula: '41736', employeeType: 'CONTRATISTA', department: 'I&C', role: 'employee' },
          '41187': { firstName: 'NICOLAS', lastName: 'BARANDA', matricula: '41187', employeeType: 'NASA', department: 'I&C', role: 'employee' },
          '21514': { firstName: 'MATIAS', lastName: 'CACERES', matricula: '21514', employeeType: 'NASA', department: 'I&C', role: 'employee' },
          '20109': { firstName: 'CARLOS', lastName: 'CARABANA', matricula: '20109', employeeType: 'NASA', department: 'I&C', role: 'employee' },
          '20623': { firstName: 'NAHUEL', lastName: 'ELSERSER', matricula: '20623', employeeType: 'NASA', department: 'I&C', role: 'supervisor' },
          '22145': { firstName: 'SILVIO', lastName: 'HEREDIA', matricula: '22145', employeeType: 'NASA', department: 'I&C', role: 'employee' },
          '21174': { firstName: 'CARLOS', lastName: 'MONTERO', matricula: '21174', employeeType: 'NASA', department: 'I&C', role: 'employee' },
          '20226': { firstName: 'WALTER', lastName: 'OCAMPO', matricula: '20226', employeeType: 'NASA', department: 'I&C', role: 'supervisor' },
          '22565': { firstName: 'MARCELO', lastName: 'RAMOS', matricula: '22565', employeeType: 'NASA', department: 'I&C', role: 'employee' },
          '20618': { firstName: 'ROMAN LEANDRO', lastName: 'RIOS', matricula: '20618', employeeType: 'NASA', department: 'I&C', role: 'supervisor' },
          '20619': { firstName: 'NICOLAS', lastName: 'VEGA', matricula: '20619', employeeType: 'NASA', department: 'I&C', role: 'supervisor' }
        };

        function VacationDashboard() {
          const [isLoggedIn, setIsLoggedIn] = useState(false);
          const [loginMatricula, setLoginMatricula] = useState('');
          const [currentUser, setCurrentUser] = useState(null);
          const [loginError, setLoginError] = useState('');
          const [allRequests, setAllRequests] = useState([]);
          const [formData, setFormData] = useState({ startDate: '', endDate: '', reason: '' });
          const [currentMonth, setCurrentMonth] = useState(new Date());
          const [filterStatus, setFilterStatus] = useState('all');

          const handleLogin = (e) => {
            e.preventDefault();
            const user = employeesDB[loginMatricula.toUpperCase()];
            if (user) {
              setCurrentUser(user);
              setIsLoggedIn(true);
              setLoginError('');
              
              // Cargar solicitudes del localStorage
              const saved = localStorage.getItem('vacacionesRequests');
              if (saved) {
                setAllRequests(JSON.parse(saved));
              }
            } else {
              setLoginError('Matr칤cula no encontrada. Verifica tu matr칤cula.');
            }
          };

          const handleLogout = () => {
            setIsLoggedIn(false);
            setCurrentUser(null);
            setLoginMatricula('');
            setFormData({ startDate: '', endDate: '', reason: '' });
          };

          const calculateDays = (start, end) => {
            if (!start || !end) return 0;
            const startDate = new Date(start);
            const endDate = new Date(end);
            const diffTime = Math.abs(endDate - startDate);
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;
          };

          const handleSubmit = (e) => {
            e.preventDefault();
            const days = calculateDays(formData.startDate, formData.endDate);
            const newRequest = {
              id: Date.now(),
              matricula: currentUser.matricula,
              firstName: currentUser.firstName,
              lastName: currentUser.lastName,
              employeeType: currentUser.employeeType,
              department: currentUser.department,
              startDate: formData.startDate,
              endDate: formData.endDate,
              days: days,
              status: "pendiente",
              reason: formData.reason,
              requestDate: new Date().toISOString().split('T')[0]
            };
            const updated = [...allRequests, newRequest];
            setAllRequests(updated);
            localStorage.setItem('vacacionesRequests', JSON.stringify(updated));
            setFormData({ startDate: '', endDate: '', reason: '' });
            alert('Solicitud enviada exitosamente. Pendiente de aprobaci칩n.');
          };

          const handleApproveRequest = (requestId) => {
            const updated = allRequests.map(req => 
              req.id === requestId ? { ...req, status: 'aprobado' } : req
            );
            setAllRequests(updated);
            localStorage.setItem('vacacionesRequests', JSON.stringify(updated));
            alert('Solicitud aprobada exitosamente');
          };

          const handleRejectRequest = (requestId) => {
            const reason = prompt('Ingresa el motivo del rechazo:');
            if (reason) {
              const updated = allRequests.map(req => 
                req.id === requestId ? { ...req, status: 'rechazado', rejectionReason: reason } : req
              );
              setAllRequests(updated);
              localStorage.setItem('vacacionesRequests', JSON.stringify(updated));
              alert('Solicitud rechazada');
            }
          };

          const myRequests = allRequests.filter(req => req.matricula === currentUser?.matricula);
          const nasaRequests = allRequests.filter(req => req.employeeType === 'NASA');
          const contratistaRequests = allRequests.filter(req => req.employeeType === 'CONTRATISTA');

          const getStatusColor = (status) => {
            switch(status) {
              case 'aprobado': return 'bg-green-100 text-green-800';
              case 'pendiente': return 'bg-yellow-100 text-yellow-800';
              case 'rechazado': return 'bg-red-100 text-red-800';
              default: return 'bg-gray-100 text-gray-800';
            }
          };

          if (!isLoggedIn) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-6">
                <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
                  <div className="text-center mb-8">
                    <div className="bg-indigo-600 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                      <CalendarIcon />
                    </div>
                    <h1 className="text-3xl font-bold text-gray-800 mb-2">VACACIONES 2025-26 I&C</h1>
                    <p className="text-gray-600">Ingresa tu matr칤cula para continuar</p>
                  </div>
                  <form onSubmit={handleLogin} className="space-y-6">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Matr칤cula</label>
                      <input
                        type="text"
                        value={loginMatricula}
                        onChange={(e) => setLoginMatricula(e.target.value)}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg"
                        placeholder="Ej: 40900"
                        required
                      />
                    </div>
                    {loginError && (
                      <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                        {loginError}
                      </div>
                    )}
                    <button
                      type="submit"
                      className="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors duration-200 shadow-md text-lg"
                    >
                      Ingresar
                    </button>
                  </form>
                  <div className="mt-6 text-center text-sm text-gray-500">
                    <p className="font-semibold mb-1">Supervisores:</p>
                    <p>VEGA (20619) - OCAMPO (20226)</p>
                    <p>RIOS (20618) - ELSERSER (20623)</p>
                  </div>
                </div>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
              <div className="max-w-7xl mx-auto">
                <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-4">
                      <div className="bg-indigo-600 p-3 rounded-lg text-white">
                        {currentUser.role === 'employee' ? <UserIcon /> : <ShieldIcon />}
                      </div>
                      <div>
                        <h1 className="text-3xl font-bold text-gray-800">VACACIONES 2025-26 I&C</h1>
                        <p className="text-gray-600">
                          {currentUser.role === 'employee' 
                            ? `${currentUser.firstName} ${currentUser.lastName} - ${currentUser.employeeType}` 
                            : 'Panel de Supervisor'}
                        </p>
                      </div>
                    </div>
                    <button
                      onClick={handleLogout}
                      className="flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium"
                    >
                      <LogOutIcon />
                      Cerrar Sesi칩n
                    </button>
                  </div>
                </div>

                {currentUser.role === 'employee' ? (
                  <>
                    <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                      <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <UserIcon />
                        Informaci칩n Personal
                      </h2>
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                          <p className="text-sm text-gray-500 font-medium">Nombre y Apellido</p>
                          <p className="text-lg font-semibold text-gray-800">{currentUser.firstName} {currentUser.lastName}</p>
                        </div>
                        <div>
                          <p className="text-sm text-gray-500 font-medium">Matr칤cula</p>
                          <p className="text-lg font-semibold text-gray-800">{currentUser.matricula}</p>
                        </div>
                        <div>
                          <p className="text-sm text-gray-500 font-medium">Tipo de Personal</p>
                          <span className={`inline-block px-3 py-1 rounded-full text-sm font-semibold ${
                            currentUser.employeeType === 'NASA' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'
                          }`}>
                            {currentUser.employeeType}
                          </span>
                        </div>
                      </div>
                    </div>

                    <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                      <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                        <CalendarIcon />
                        Solicitar Vacaciones
                      </h2>
                      <form onSubmit={handleSubmit} className="space-y-4">
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Fecha de Inicio</label>
                          <input
                            type="date"
                            value={formData.startDate}
                            onChange={(e) => setFormData({...formData, startDate: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg"
                            required
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Fecha de Fin</label>
                          <input
                            type="date"
                            value={formData.endDate}
                            onChange={(e) => setFormData({...formData, endDate: e.target.value})}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg"
                            required
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Motivo (opcional)</label>
                          <textarea
                            value={formData.reason}
                            onChange={(e) => setFormData({...formData, reason: e.target.value})}
                            rows="3"
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg"
                            placeholder="Describe el motivo..."
                          />
                        </div>
                        {formData.startDate && formData.endDate && (
                          <div className="bg-indigo-50 p-4 rounded-lg">
                            <p className="text-sm font-medium text-indigo-800">
                              D칤as solicitados: <span className="text-2xl font-bold">{calculateDays(formData.startDate, formData.endDate)}</span>
                            </p>
                          </div>
                        )}
                        <button type="submit" className="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700">
                          Enviar Solicitud
                        </button>
                      </form>
                    </div>

                    <div className="bg-white rounded-xl shadow-lg p-6">
                      <h2 className="text-2xl font-bold text-gray-800 mb-6">Mis Solicitudes</h2>
                      <div className="space-y-4">
                        {myRequests.length === 0 ? (
                          <p className="text-gray-500 text-center py-8">No tienes solicitudes registradas</p>
                        ) : (
                          myRequests.map(request => (
                            <div key={request.id} className="border border-gray-200 rounded-lg p-4">
                              <div className="flex items-center gap-4 mb-2">
                                <span className="font-semibold text-gray-800">
                                  {new Date(request.startDate).toLocaleDateString('es-ES')} - {new Date(request.endDate).toLocaleDateString('es-ES')}
                                </span>
                                <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusColor(request.status)}`}>
                                  {request.status.toUpperCase()}
                                </span>
                                <span className="text-sm text-gray-600">{request.days} d칤as</span>
                              </div>
                              {request.reason && <p className="text-sm text-gray-600">Motivo: {request.reason}</p>}
                              {request.status === 'rechazado' && request.rejectionReason && (
                                <p className="text-sm text-red-600 bg-red-50 p-2 rounded mt-2">
                                  <strong>Motivo de rechazo:</strong> {request.rejectionReason}
                                </p>
                              )}
                            </div>
                          ))
                        )}
                      </div>
                    </div>
                  </>
                ) : (
                  <>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                      <div className="bg-white rounded-xl shadow-md p-6">
                        <div className="flex items-center justify-between">
                          <div>
                            <p className="text-gray-500 text-sm font-medium">Pendientes</p>
                            <p className="text-3xl font-bold text-yellow-600">{allRequests.filter(r => r.status === 'pendiente').length}</p>
                          </div>
                          <ClockIcon />
                        </div>
                      </div>
                      <div className="bg-white rounded-xl shadow-md p-6">
                        <div className="flex items-center justify-between">
                          <div>
                            <p className="text-gray-500 text-sm font-medium">Aprobadas</p>
                            <p className="text-3xl font-bold text-green-600">{allRequests.filter(r => r.status === 'aprobado').length}</p>
                          </div>
                          <CheckIcon />
                        </div>
                      </div>
                      <div className="bg-white rounded-xl shadow-md p-6">
                        <div className="flex items-center justify-between">
                          <div>
                            <p className="text-gray-500 text-sm font-medium">Rechazadas</p>
                            <p className="text-3xl font-bold text-red-600">{allRequests.filter(r => r.status === 'rechazado').length}</p>
                          </div>
                          <XIcon />
                        </div>
                      </div>
                    </div>

                    <div className="bg-white rounded-xl shadow-lg p-4 mb-6">
                      <div className="flex items-center justify-center gap-2">
                        {['all', 'pendiente', 'aprobado', 'rechazado'].map(status => (
                          <button
                            key={status}
                            onClick={() => setFilterStatus(status)}
                            className={`px-4 py-2 rounded-lg text-sm font-medium ${
                              filterStatus === status ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700'
                            }`}
                          >
                            {status === 'all' ? 'Todas' : status.charAt(0).toUpperCase() + status.slice(1) + 's'}
                          </button>
                        ))}
                      </div>
                    </div>

                    {['NASA', 'CONTRATISTA'].map(type => {
                      const requests = type === 'NASA' ? nasaRequests : contratistaRequests;
                      const filtered = filterStatus === 'all' ? requests : requests.filter(r => r.status === filterStatus);
                      
                      return (
                        <div key={type} className="bg-white rounded-xl shadow-lg p-6 mb-6">
                          <h2 className="text-2xl font-bold text-gray-800 mb-6">Solicitudes Personal {type}</h2>
                          <div className="space-y-4">
                            {filtered.length === 0 ? (
                              <p className="text-gray-500 text-center py-8">No hay solicitudes para mostrar</p>
                            ) : (
                              filtered.map(request => (
                                <div key={request.id} className={`border-2 rounded-lg p-5 ${
                                  type === 'NASA' ? 'border-blue-200 bg-blue-50' : 'border-purple-200 bg-purple-50'
                                }`}>
                                  <div className="flex items-start justify-between">
                                    <div className="flex-1">
                                      <div className="flex items-center gap-3 mb-3 flex-wrap">
                                        <div className={`px-3 py-1 rounded-lg font-semibold text-sm text-white ${
                                          type === 'NASA' ? 'bg-blue-600' : 'bg-purple-600'
                                        }`}>
                                          {request.firstName} {request.lastName}
                                        </div>
                                        <span className="text-sm bg-white px-2 py-1 rounded">游늶 {request.matricula}</span>
                                        <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusColor(request.status)}`}>
                                          {request.status.toUpperCase()}
                                        </span>
                                      </div>
                                      <div className="grid grid-cols-2 gap-4 mb-3">
                                        <div>
                                          <p className="text-xs text-gray-500">Per칤odo</p>
                                          <p className="font-semibold">{new Date(request.startDate).toLocaleDateString('es-ES')} - {new Date(request.endDate).toLocaleDateString('es-ES')}</p>
                                        </div>
                                        <div>
                                          <p className="text-xs text-gray-500">D칤as solicitados</p>
                                          <p className="font-semibold">{request.days} d칤as</p>
                                        </div>
                                      </div>
                                      {request.reason && (
                                        <div className="mb-3">
                                          <p className="text-xs text-gray-500">Motivo</p>
                                          <p className="text-sm bg-white p-2 rounded">{request.reason}</p>
                                        </div>
                                      )}
                                      {request.status === 'rechazado' && request.rejectionReason && (
                                        <p className="text-sm text-red-600 bg-red-50 p-2 rounded">{request.rejectionReason}</p>
                                      )}
                                    </div>
                                    {request.status === 'pendiente' && (
                                      <div className="flex gap-2 ml-4">
                                        <button
                                          onClick={() => handleApproveRequest(request.id)}
                                          className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2"
                                        >
                                          <CheckIcon />
                                          Aprobar
                                        </button>
                                        <button
                                          onClick={() => handleRejectRequest(request.id)}
                                          className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center gap-2"
                                        >
                                          <XIcon />
                                          Rechazar
                                        </button>
                                      </div>
                                    )}
                                  </div>
                                </div>
                              ))
                            )}
                          </div>
                        </div>
                      );
                    })}
                  </>
                )}
              </div>
            </div>
          );
        }

        ReactDOM.render(<VacationDashboard />, document.getElementById('root'));
    </script>
</body></html>
<script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app-compat.js"></script> <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-firestore-compat.js"></script>

<script>
  // 3. TU CONFIGURACI칍N DE PROYECTO 칔NICA
  const firebaseConfig = {
    apiKey: "AIzaSyDEh369Z6u-4WMmUYWrOhCUFujjWW19-VI",
    authDomain: "vacaciones-ic-firebaseapp.com",
    projectId: "vacaciones-ic",
    storageBucket: "vacaciones-ic.appspot.com",
    messagingSenderId: "55848690559",
    appId: "1:55848690559:web:e112888cccb3c77a66b04a"
  };

  // 4. Inicializa Firebase
  const app = firebase.initializeApp(firebaseConfig)
  const db = firebase.firestore()
// A칌ADE ESTE BLOQUE COMPLETO AQU칈 (L칤neas 483 en adelante):
db.collection("vacaciones").add({
    destino: "Par칤s, Francia",
    fechaInicio: "2025-07-15",
    dias: 7,
    activa: true
})
.then((docRef) => {
    console.log("Documento escrito con ID: ", docRef.id);
})
.catch((error) => {
    console.error("Error al a침adir documento: ", error);
});
// FIN del bloque a a침adir

</script>
